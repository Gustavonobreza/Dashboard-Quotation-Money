<!DOCTYPE html>
<html lang=pt-BR>

<head>
   <meta charset=utf-8>
   <title>Dashboard quotations</title>
   <meta name=keywords content= />
   <meta name=description content='Cotação das moedas, Instagram: @gustavonobresa, Twitter: @gustavonobresa' />
   <meta name=author content="Gustavo Alexandre Nobre Mesquita" />
   <link rel=stylesheet type=text/css href="css/style.css" />
   <link rel="shortcut icon" href="#" />
   <!-- Indicando para não ter cache(estava tendo problemas com o ERRO: 304) -->
   <!-- <meta http-equiv="cache-control" content="max-age=0" />
   <meta http-equiv="cache-control" content="no-cache" />
   <meta http-equiv="expires" content="0" />
   <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
   <meta http-equiv="pragma" content="no-cache" /> -->
</head>

<body>
   <h1>Dashboard</h1>
   <div class="main">
      <div class="list">

      </div>
      <script src="js/index.js"></script>
      <!-- <script src="js/server.js"></script> -->
      <script>
         async function getContent() {
            try {
               const response = await fetch("https://economia.awesomeapi.com.br/json/all")
               // console.log(response);
               const datas = await response.json()
               show(datas)


            } catch (error) {
               console.error('Deu ruim mano!', error)
            }
         }
         getContent()

         function show(JSON_T) {
            const listDisplay = document.querySelector('.list');

            var USD = JSON_T.USD;
            var USDT = JSON_T.USDT;
            var CAD = JSON_T.CAD;
            var AUD = JSON_T.AUD;
            var EUR = JSON_T.EUR;
            var GBP = JSON_T.GBP;
            var ARS = JSON_T.ARS;
            var JPY = JSON_T.JPY;
            var CHF = JSON_T.CHF;
            var CNY = JSON_T.CNY;
            var BTC = JSON_T.BTC;
            var ETH = JSON_T.ETH;

            // console.log(CAD);
            function numberToReal(numero) {
               var numero = numero.toFixed(2).split('.');
               numero[0] = "R$ " + numero[0].split(/(?=(?:...)*$)/).join('.');
               return numero.join(',');
            }

            let arrTp = [USD, USDT, CAD, AUD, EUR, GBP, ARS, CHF, JPY, BTC, ETH];
            for (var i = 0; i < arrTp.length; i++) {
               let FormattedMoney = numberToReal(Number(arrTp[i].bid));
               listDisplay.innerHTML += `
          <div class="border" id="${i}">
          ${arrTp[i].name}: <span>${FormattedMoney}<span> </div><br>
            `
            
            }
            
         }
      </script>
</body>
<!-- ${Number(arrTp[i].bid).toFixed(2).replace(".", ",")} -->

</html>